import{r as m,j as t,L as we,u as M,a as de,b as G,c as Ce,d as be,e as ue,R as fe,P as ke}from"./index-wX5s4U5x.js";const Se="/assets/edgevideoai-logo-CLq2wIFp.png";function je({channelId:e,className:n="",...o}){const[r,i]=m.useState(null),[l,s]=m.useState(null),h=e||window.channelId;return m.useEffect(()=>{let u=!1;if(!h){s("No channelId provided");return}async function c(){var p,x;try{const f=await fetch(`https://studio-api.edgevideo.com/channel/loadChannelLogo/${h}`);if(!f.ok)throw new Error(`Status ${f.status}`);const a=await f.json(),C=(x=(p=a==null?void 0:a.data)==null?void 0:p[0])==null?void 0:x.logo_url;if(!C)throw new Error("logo_url missing in response");u||i(C)}catch(f){console.error("ChannelLogo fetch error:",f),u||s("Failed to load channel logo")}}return c(),()=>{u=!0}},[h]),l?t.jsx("div",{className:"channel-logo-error",children:l}):r?t.jsx("img",{id:"channelLogo",className:n,src:r,srcSet:r,alt:"Channel Logo",...o}):t.jsx("div",{className:"channel-logo-loading",children:t.jsx(we,{})})}function Ee(){const e=window.channelId;return t.jsxs("header",{className:"header",children:[t.jsx("img",{src:Se,alt:"EdgeVideo",height:"30"}),e&&t.jsx(je,{channelId:e,className:"channel-logo"})]})}function Le({tabs:e,activeTab:n,onChangeTab:o,onToggleSidebar:r}){const{user:i}=M(),s=`https://api.dicebear.com/9.x/bottts/svg?seed=${i?i.avatarSeed:"guest"}`;return t.jsx("footer",{className:"footer",children:t.jsxs("nav",{className:"tabs",children:[e.map(({key:h,label:u})=>t.jsx("button",{className:`tab${n===h?" active":""}`,"data-target":h,onClick:()=>o(h),"aria-label":`${h} tab`,children:u},h)),t.jsx("button",{className:"tab sidebar-toggle",onClick:r,"aria-label":"Toggle profile sidebar",children:t.jsx("div",{className:"avatar-wrapper small",children:t.jsx("img",{loading:"lazy",src:s,alt:i?`${i.name} avatar`:"Guest avatar",className:"avatar"})})})]})})}let R=[];function Te(e){R.some(o=>o.id===e.id)||(R.push(e),R.length>10&&R.shift())}function Ne(){let e=null;if(R.length>0)e=R.shift();else return;let n=document.querySelectorAll("div.face"),o=null;for(let i of n)if(i.getAttribute("data-id")==e.id)return;o=document.querySelector(".face0");let r;r=o;try{if(r==null)return;r.setAttribute("data-id",e.id),r.setAttribute("data-time",Date.now());const i=r.querySelector("p.face-name");i&&(i.innerText=e.name);const l=r.querySelector("p.face-fame");l&&(e.accomplishments!=="{}"?l.innerText=e.accomplishments:l.innerText="");const s=r.querySelector("p.face-dob");if(s){const x=new Date(e.dob),f=`${x.getMonth()+1}/${x.getDate()}/${x.getFullYear()}`;s.innerText=f}const h=r.querySelector("img.face-image");h&&(h.src=e.image_url,h.srcset="");const u=r.querySelectorAll("div.socials-links p.socials-link");u.forEach((x,f)=>{x&&f<3&&(x.innerHTML="")});const c={twitter_url:e.twitter_url?`<a href="${e.twitter_url}" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"> <circle cx="12" cy="12" r="12" fill="black"/> <path d="M15.15 17.4L6.30005 6.59998H8.70005L17.55 17.4H15.75H15.15Z" stroke="white"/> <path d="M17.6999 6L12.8999 11.55L12.5999 11.1L12.1499 10.65L16.1999 6H17.6999Z" fill="white"/> <path d="M11.55 13.05L7.35 17.7H6L11.2248 11.7L10.8344 12.15L11.55 13.05Z" fill="white"/> </svg></a>`:"",facebook_url:e.facebook_url?`<a href="${e.facebook_url}" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"> <circle cx="12" cy="12" r="12" fill="black"/> <path d="M14.9155 8.72727V10.4176H9.43397V8.72727H14.9155ZM10.8044 18V7.85192C10.8044 7.2281 10.9331 6.70892 11.1907 6.29439C11.4523 5.87985 11.8025 5.56996 12.2411 5.3647C12.6798 5.15945 13.1668 5.05682 13.7021 5.05682C14.0804 5.05682 14.4164 5.087 14.7102 5.14737C15.004 5.20774 15.2214 5.26207 15.3622 5.31037L14.9276 7.00071C14.835 6.97254 14.7183 6.94436 14.5774 6.91619C14.4366 6.884 14.2796 6.8679 14.1066 6.8679C13.7001 6.8679 13.4123 6.9665 13.2433 7.16371C13.0783 7.35689 12.9958 7.63459 12.9958 7.9968V18H10.8044Z" fill="white"/> </svg></a>`:"",instagram_url:e.instagram_url?`<a href="${e.instagram_url}" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"> <circle cx="12" cy="12" r="12" fill="black"/> <rect x="6.5" y="6.5" width="11" height="11" rx="2.5" stroke="white"/> <circle cx="12" cy="12" r="2.5" stroke="white"/> <circle cx="15.1499" cy="8.84998" r="0.75" fill="white"/> </svg></a>`:""};let p=0;u.forEach((x,f)=>{if(x&&f<3){const a=Object.keys(c)[f];x.innerHTML=c[a],c[a]!=""&&p++}}),p==0?r.querySelector("div.face-socials").style.display="none":r.querySelector("div.face-socials").style.display="block",r.parentElement.insertBefore(r,r.parentElement.firstChild)}catch{}}let I=[],_=[],B=null;function me(e){_.some(o=>o.id===e.id)||(_.push(e),_.length>10&&_.shift())}function Z(){if(B!=null&&(clearTimeout(B),B=null),_.length>0){let e=_.shift();e.time=Date.now(),I.findIndex(o=>o.id===e.id)===-1&&(I.push(e),I.length>10&&I.shift(),typeof window<"u"&&window.dispatchEvent(new CustomEvent("new-product",{detail:e})),typeof flashShopping=="function"&&flashShopping())}_.length>0&&(B=setTimeout(Z,1e3))}function oe(e){let n;if(typeof e.date=="object"&&e.date.hasOwnProperty("date")&&e.date.hasOwnProperty("time")){const{date:o,time:r}=e.date;n=new Date(`${o}T${r}`).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,month:"numeric",day:"numeric",year:"numeric"})}else if(typeof e.date=="string"&&!isNaN(Date.parse(e.date)))n=new Date(e.date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,month:"numeric",day:"numeric",year:"numeric"});else return"";return n}function he(e,n="USD"){e=parseFloat(e);const o={USD:{symbol:"$",position:"prefix"},US$:{symbol:"$",position:"prefix"},$:{symbol:"$",position:"prefix"},GBP:{symbol:"Â£",position:"prefix"},"Â£":{symbol:"Â£",position:"prefix"},EUR:{symbol:"â‚¬",position:"postfix"},"â‚¬":{symbol:"â‚¬",position:"postfix"},JPY:{symbol:"Â¥",position:"prefix"},"Â¥":{symbol:"Â¥",position:"prefix"},CAD:{symbol:"C$",position:"prefix"},C$:{symbol:"C$",position:"prefix"},AUD:{symbol:"A$",position:"prefix"},A$:{symbol:"A$",position:"prefix"},INR:{symbol:"â‚¹",position:"prefix"},"â‚¹":{symbol:"â‚¹",position:"prefix"},CNY:{symbol:"Â¥",position:"prefix"},"CNÂ¥":{symbol:"Â¥",position:"prefix"},CHF:{symbol:"CHF",position:"postfix"},RUB:{symbol:"â‚½",position:"postfix"},"â‚½":{symbol:"â‚½",position:"postfix"}};n=n.toUpperCase();let r="",i="prefix";o.hasOwnProperty(n)?(r=o[n].symbol,i=o[n].position):(r=n,i="postfix");let l;return e%1===0?l=e.toLocaleString(void 0,{maximumFractionDigits:0}):l=e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),i==="prefix"?`${r}${l}`:`${l}${r}`}let D,$,X,Y,Q,N,W;const Ae="https://fastapi.edgevideo.ai",pe=`${Ae}/auth_google`,$e=`${pe}/details`,Ie=window.location.origin+window.location.pathname;async function _e(e){N&&(N.textContent="");try{const n=await fetch($e,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(n.status===401){console.error("Token is invalid or expired."),localStorage.removeItem("authToken");let i=null;try{i=await n.json()}catch{}const l=(i==null?void 0:i.message)||"Session invalid. Please log in again.";throw new Error(l)}if(!n.ok){let i=null;try{i=await n.json()}catch{}const l=(i==null?void 0:i.message)||`Failed to fetch user details (Status: ${n.status})`;throw new Error(l)}const o=await n.json(),r=o.name||o.email||"User";return{...o,displayName:r}}catch(n){return console.error("Error fetching user details:",n),N&&(N.textContent=n.message||"Could not retrieve user information."),H(),null}}async function re(e,n){const o=await _e(e);if(o){D&&(D.style.display="none"),$&&($.style.display="flex"),X.forEach(l=>{l.textContent=o.displayName});const i=`https://api.dicebear.com/9.x/bottts/svg?seed=${encodeURIComponent(o.displayName)}`;Q.forEach(l=>{l.src=i,l.alt=`${o.displayName}'s avatar`,l.style.display="flex"}),Y.forEach(l=>{l.style.display="flex"}),N&&(N.textContent=""),console.log(`Logged in as: ${o.displayName} (${o.email})`),typeof n=="function"&&await n()}}function H(){D&&(D.style.display="flex"),$&&($.style.display="none"),X.forEach(n=>{n.textContent=""});const e="https://api.dicebear.com/9.x/bottts/svg?seed=guest";Q.forEach(n=>{n.src=e,n.alt="Default avatar"}),Y.forEach(n=>{n.style.display="none"}),console.log("Showing logged out state.")}function De(e,n){D=document.querySelector("button.gsi-material-button"),$=document.getElementById("logout"),X=document.querySelectorAll(".username"),Y=document.querySelectorAll(".avatar-container"),Q=document.querySelectorAll(".avatar"),N=document.getElementById("errorMessage"),W=document.getElementById("favoritesBtn"),D?D.addEventListener("click",()=>{N&&(N.textContent="");const l=`${pe}/google?redirectUri=${encodeURIComponent(Ie)}`;window.location.href=l}):console.warn('Sign in button with class "gsi-material-button" not found.'),$?($.addEventListener("click",()=>{N&&(N.textContent=""),localStorage.removeItem("authToken"),H()}),$.style.cursor="pointer"):console.warn('Logout div with ID "logout" not found.'),W?W.addEventListener("click",()=>{if(console.log("Favorites button clicked."),!localStorage.getItem("authToken")){console.log("User not logged in, cannot show favorites.");const s=document.getElementById("favs");s&&s.querySelectorAll(".fav-item:not(.none)").forEach(h=>h.remove())}}):console.warn("Favorites button with ID 'favoritesBtn' not found.");const r=new URLSearchParams(window.location.search).get("token");let i=null;if(r)i=r,localStorage.setItem("authToken",i),window.history.replaceState({},document.title,window.location.pathname),console.log("Token received from URL, attempting login..."),re(i,e);else{const l=localStorage.getItem("authToken");l?(console.log("Token found in localStorage, attempting login..."),i=l,re(i,e)):(console.log("No token found. Showing logged out state."),H())}}function Re(){const e=window.DEFAULT_CHANNEL_ID||"3d8c4c38-2d6e-483c-bdc5-e1eeeadd155e",o=new URLSearchParams(window.location.search).get("channelId")||e;try{localStorage.setItem("channelId",o)}catch{}return window.channelId=o,o}const T=Re(),Fe="wss://slave-ws-service-342233178764.us-west1.run.app",ge="https://fastapi.edgevideo.ai/tracking",Pe=`${ge}/votes/products`,qe=`${ge}/votes/viator`;let A=[],b=window.edgeConsole||{log:(...e)=>window.console.log(...e),info:(...e)=>window.console.info(...e),warn:(...e)=>window.console.warn(...e),error:(...e)=>window.console.error(...e),debug:(...e)=>window.console.debug(...e)};window.edgeConsole=b;async function Ue(){b.log("Attempting to fetch all voted items (Products, Viator)...");const e=localStorage.getItem("authToken");if(!e){b.log("Fetch voted items skipped: No auth token found."),A=[];return}const n=[Pe,qe],o={method:"GET",headers:{Authorization:`Bearer ${e}`}};try{const r=await Promise.allSettled(n.map(s=>fetch(s,o)));let i=[],l=!1;for(let s=0;s<r.length;s++){const h=r[s],u=n[s];if(h.status==="fulfilled"){const c=h.value;if(c.status===401){b.error(`Workspace voted items failed for ${u}: Unauthorized (401). Token invalid or expired.`),localStorage.removeItem("authToken"),H(),A=[];return}if(!c.ok){const x=await c.text().catch(()=>`Status ${c.status}`);b.error(`Failed to fetch voted items from ${u}: ${c.status} - ${x}`),l=!0;continue}const p=await c.json();b.log(`Successfully fetched ${p.length} items from ${u}.`),i=i.concat(p)}else b.error(`Workspace rejected for ${u}:`,h.reason),l=!0}A=i,b.log(`Total voted items fetched: ${A.length}.`),He(),l&&b.warn("One or more endpoints failed during fetchVotedProducts.")}catch(r){b.error("Unexpected error fetching voted items:",r),A=[]}}function ie(e){let n=document.getElementById("aiStatusTextShopping");n!=null&&(n.innerText=e)}async function xe(){if(typeof T<"u"&&T!==null){let n=await(await fetch(`https://fastapi.edgevideo.ai/product_search/recent_products/${T}/4`)).json();for(let o of n)me(o);Z()}else setTimeout(xe,100)}function z(){if(typeof T<"u"&&T!==null)b.log("channelId is defined and not null:",T);else{b.log("channelId undefined or null..."),setTimeout(z,1e3);return}let e=new WebSocket(Fe);e.onopen=function(){b.log("Connected to the WebSocket server"),ie("Connected!"),e.send(JSON.stringify({subscribe:`product-${T}`})),e.send(JSON.stringify({subscribe:`shopping-ai-status-${T}`})),e.send(JSON.stringify({subscribe:`face-${T}`}))},e.onmessage=async function(o){try{let r=JSON.parse(o.data);b.log(r),"ai"in r?ie(r.ai):"face"in r?Te(r.face):"id"in r&&(me(r),Z())}catch(r){b.error("Error processing incoming message:",r)}},e.onclose=function(){b.log("Disconnected from the WebSocket server. Attempting to reconnect..."),setTimeout(z,5e3)},e.onerror=function(o){b.error("WebSocket error:",o)}}function se(e,n){e.classList.add(n),e.querySelectorAll("*").forEach(o=>{o.classList.add(n)})}function V(e,n){e.classList.remove(n),e.querySelectorAll("*").forEach(o=>{o.classList.remove(n)})}let F={};async function Be(e){if(!e||!e.id||!e.link){b.error("trackClick failed: Missing essential product data.");return}const n=e.id;F[n]&&clearTimeout(F[n]),F[n]=setTimeout(async()=>{let o="";if(e.type==="ticket"?e.link.toLowerCase().includes("viator")?o="Viator Ticket":o="DB Ticket":e.type==="deal"?o="Deal":e.link.toLowerCase().includes("amazon")?o="Amazon Product":o="DB Product",!o){b.error("Debounced trackClick failed: Could not determine click type for item:",e),delete F[n];return}const r={itemId:n,clickTypeName:o};typeof T<"u"&&T!==null&&(r.channel_id=T),b.log("Attempting to track click (debounced for item "+n+"):",r);try{const i=await fetch("https://fastapi.edgevideo.ai/tracking/click",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(i.ok)b.log(`Debounced click (item ${n}) tracked successfully as Type: ${o}`);else{const l=await i.text();b.error(`Debounced click tracking (item ${n}) API call failed: ${i.status} ${i.statusText}`,l)}}catch(i){b.error(`Network or other error sending debounced click tracking data (item ${n}):`,i)}delete F[n]},500)}function Ve(e,n=null){let o=document.querySelector(".product0");if(!o){b.warn("UpdateProductViaDataRole: .product0 container not found");return}let r=o.querySelectorAll('[data-role="product-image"]'),i=o.querySelectorAll('[data-role="frame-image"]'),l=o.querySelectorAll('[data-role="product-link"]'),s=o.querySelectorAll('[data-role="product-name"]'),h=o.querySelectorAll('[data-role="more-link"]'),u=o.querySelectorAll('[data-role="ai-description"]'),c=o.querySelectorAll('[data-role="vendor-logo"]'),p=o.querySelectorAll('[data-role="product-price"]'),x=o.querySelectorAll('[data-role="product-price-container"]'),f=o.querySelectorAll('[data-role="matchText"]');if(!I||e>=I.length||e<0){b.error(`UpdateProductViaDataRole: Invalid index ${e} for products array.`);return}let a=I[e],C=new Image;C.onload=function(){if(C.currentSrc&&C.currentSrc.includes("noimage")){b.log('Image contains "noimage", skipping update.');return}function y(d){Be(a)}if(r.forEach(d=>{d.src=a.image,d.setAttribute("data-time",n),d.style.cursor="pointer";let w=d.parentElement;for(;w;)w.setAttribute("data-time",n),w=w.parentElement;d.removeEventListener("click",y),d.addEventListener("click",y)}),l.forEach(d=>{d.href=a.link,d.setAttribute("data-time",n),d.parentElement&&d.parentElement.setAttribute("data-time",n),d.removeEventListener("click",y),d.addEventListener("click",y)}),s.forEach(d=>{d.innerText=a.title,d.setAttribute("data-time",n),d.style.cursor="pointer",d.parentElement&&d.parentElement.setAttribute("data-time",n),d.removeEventListener("click",y),d.addEventListener("click",y)}),"type"in a&&a.type==="ticket"){b.log("Ticket type found"),V(o,"coupon-style"),se(o,"ticket-style");let d=o.querySelectorAll('[data-role="event-name"]'),w=o.querySelectorAll('[data-role="event-date"]'),v=o.querySelectorAll('[data-role="event-location"]'),E=o.querySelectorAll('[data-role="event-link"]');d.forEach(S=>{S.innerText=a.title}),w.forEach(S=>{S.innerText=oe(a)}),v.forEach(S=>{S.innerText=a.location}),E.forEach(S=>{S.href=a.link,S.removeEventListener("click",y),S.addEventListener("click",y)})}else if("type"in a&&a.type=="deal"){b.log("Deal type found"),V(o,"ticket-style"),se(o,"coupon-style");let d=o.querySelectorAll('[data-role="coupon-title"]'),w=o.querySelectorAll('[data-role="vendor-name"]'),v=o.querySelectorAll('[data-role="coupon-date"]'),E=o.querySelectorAll('[data-role="coupon-campaign"]'),S=o.querySelectorAll('[data-role="coupon-link"]'),L=o.querySelectorAll('[data-role="coupon-type"]'),P=o.querySelectorAll('[data-role="coupon-description"]'),O=o.querySelectorAll('[data-role="coupon-term"]');d.forEach(j=>{j.innerText=a.title||"No Title Available"}),w.forEach(j=>{j.innerText=a.vendor_name||"No Vendor Name Available"}),v.forEach(j=>{j.innerText=oe(a)}),E.forEach(j=>{j.innerText=a.location||"No Location Available"}),L.forEach(j=>{j.innerText=a.coupon||"No Coupon Available"}),P.forEach(j=>{j.innerText=a.description||" "}),O.forEach(j=>{j.innerText=a.terms||" "}),S.forEach(j=>{j.href=a.link||"#",j.removeEventListener("click",y),j.addEventListener("click",y)})}else V(o,"ticket-style"),V(o,"coupon-style");u.forEach(d=>{d.innerText=a.explanation}),c.forEach(d=>{if(a.domain_url){let w=a.domain_url.split("."),v=a.domain_url;w[0]==="www"&&(w.splice(0,1),v=w.join(".")),d.src=`https://s2.googleusercontent.com/s2/favicons?domain=${v}&sz=64`,d.onerror=function(){this.onerror=null,this.src=`https://${a.domain_url}/favicon.ico`}}else a.logo_url?d.src=a.logo_url:(d.src="",d.style.display="none");d.src&&(d.style.display="")}),h.forEach(d=>{d.href=`https://www.amazon.com/s?k=${encodeURIComponent(a.title)}`}),o.setAttribute("data-product-id",a.id);const g=A.find(d=>String(d.item_id)===String(a.id)),k=g?g.vote_type===1?"upvote":g.vote_type===-1?"downvote":"none":"none";if(K(a.id,k),"price"in a&&a.price!==null&&a.price!==""){let d="currency"in a?a.currency:"USD",w=he(a.price,d);p.forEach(v=>{v.innerText=w,v.style.display="flex"}),x.forEach(v=>{v.style.display="flex"})}else p.forEach(d=>{d.style.display="none"}),x.forEach(d=>{d.style.display="none"});if(i.forEach(d=>{d.src=a.back_image}),"matchType"in a&&a.matchType!==null&&a.matchType!==""){let w=["SAW","HEARD","LOCATION","IDEA","INSIGHT"].find(v=>a.matchType.includes(v))||"INSIGHT";f.forEach(v=>{v.innerHTML=w})}},C.onerror=function(){b.error(`Failed to load product image for index ${e}: ${a.image}`)},a&&a.image?C.src=a.image:b.warn(`Skipping update for index ${e} due to missing product or image URL.`)}window.UpdateProductViaDataRole=Ve;function K(e,n){n===1||n==="1"?n="upvote":(n===-1||n==="-1")&&(n="downvote");const o=document.querySelectorAll(`[data-role="like"][data-product-id="${e}"], .like-button[data-product-id="${e}"], .item-container[data-product-id="${e}"] .like-button`),r=document.querySelectorAll(`[data-role="dislike"][data-product-id="${e}"], .dislike-button[data-product-id="${e}"], .item-container[data-product-id="${e}"] .dislike-button`);o.forEach(i=>{i.classList.toggle("clicked",n==="upvote")}),r.forEach(i=>{i.classList.toggle("clicked",n==="downvote")})}window.updateVoteButtonStyles=K;function He(){if(!A.length)return;document.querySelectorAll(".item-container[data-product-id]").forEach(n=>{const o=n.getAttribute("data-product-id"),r=A.find(l=>String(l.item_id)===String(o)),i=r?r.vote_type===1?"upvote":r.vote_type===-1?"downvote":"none":"none";K(o,i)})}function Me(){z(),xe()}function Oe(){setInterval(Ne,1e3)}function We(){De(Ue)}function ze({features:e=[]}){return m.useEffect(()=>{e.includes("products")&&Me(),e.includes("faces")&&Oe(),e.includes("auth")&&We()},[e]),null}function Ge(){const[e,n]=m.useState([]),[o,r]=m.useState(!0),[i,l]=m.useState(null);return m.useEffect(()=>{fetch("https://fastapi.edgevideo.ai/tracking/products/most-clicked").then(s=>{if(!s.ok)throw new Error(`Status ${s.status}`);return s.json()}).then(s=>n(s)).catch(s=>{console.error("Failed to load most-clicked:",s),l("Could not load featured products")}).finally(()=>r(!1))},[]),o?t.jsx("p",{children:"Loading featured…"}):i?t.jsx("p",{className:"error",children:i}):t.jsxs("div",{className:"most-clicked",children:[t.jsx("h4",{children:"Featured Products"}),t.jsx("ul",{id:"clicked-list",children:e.map((s,h)=>t.jsxs("li",{className:"product-card",children:[t.jsxs("a",{className:"product-img-title",href:s.link_url,target:"_blank",rel:"noopener noreferrer",children:[t.jsx("div",{className:"product-image-container clicked",children:t.jsx("img",{className:"product-image",src:s.image_url,alt:s.name})}),t.jsx("strong",{className:"product-name",children:s.name})]}),t.jsxs("small",{className:"product-count",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",className:"icon-heart",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M5.95915 0C4.86516 0 3.96346 0.774554 3.96346 1.71429V8.46429L3.5269 8.07143L3.36059 7.94643C2.59402 7.28795 1.34151 7.28795 0.574932 7.94643C-0.191644 8.60491 -0.191644 9.6808 0.574932 10.3393V10.3571L6.02152 14.9821L6.0631 15L6.08389 15.0357C6.98039 15.6138 8.12376 16 9.41005 16H10.5534C13.5703 16 16 13.9129 16 11.3214V6.85714C16 5.91741 15.0983 5.14286 14.0043 5.14286C13.7211 5.14286 13.4586 5.20982 13.2143 5.30357C12.9961 4.56027 12.2087 4 11.281 4C10.7717 4 10.304 4.17188 9.95055 4.44643C9.59714 4.17188 9.1294 4 8.62008 4C8.38621 4 8.16533 4.04241 7.95485 4.10714V1.71429C7.95485 0.774554 7.05315 0 5.95915 0ZM5.95915 1.14286C6.32815 1.14286 6.62439 1.39732 6.62439 1.71429V8H7.95485V5.71429C7.95485 5.39732 8.25109 5.14286 8.62008 5.14286C8.98908 5.14286 9.28531 5.39732 9.28531 5.71429V8H10.6158V5.71429C10.6158 5.39732 10.912 5.14286 11.281 5.14286C11.65 5.14286 11.9462 5.39732 11.9462 5.71429V8H13.3391V6.85714C13.3391 6.54018 13.6353 6.28571 14.0043 6.28571C14.3733 6.28571 14.6695 6.54018 14.6695 6.85714V11.3214C14.6695 13.3013 12.8583 14.8571 10.5534 14.8571H9.41005C8.43558 14.8571 7.59365 14.558 6.89464 14.1071L1.51041 9.53571C1.21418 9.28125 1.21418 9.00446 1.51041 8.75C1.80665 8.49554 2.12887 8.49554 2.42511 8.75L5.29392 11.2143V1.71429C5.29392 1.39732 5.59016 1.14286 5.95915 1.14286Z"})})," ",t.jsx("span",{children:s.click_count})]})]},h))})]})}function Ze(){const[e,n]=m.useState([]),[o,r]=m.useState(!0),[i,l]=m.useState(null);return m.useEffect(()=>{fetch("https://fastapi.edgevideo.ai/tracking/products/most-liked").then(s=>{if(!s.ok)throw new Error(`Status ${s.status}`);return s.json()}).then(s=>n(s)).catch(s=>{console.error("Failed to load most-liked:",s),l("Could not load liked products")}).finally(()=>r(!1))},[]),o?t.jsx("p",{children:"Loading liked…"}):i?t.jsx("p",{className:"error",children:i}):t.jsxs("div",{className:"most-liked",children:[t.jsx("h4",{children:"Trending Now"}),t.jsx("ul",{id:"liked-list",children:e.map((s,h)=>t.jsxs("li",{className:"product-card",children:[t.jsxs("a",{className:"product-img-title",href:s.link_url,target:"_blank",rel:"noopener noreferrer",children:[t.jsx("div",{className:"product-image-container liked",children:t.jsx("img",{className:"product-image",src:s.image_url,alt:s.name})}),t.jsx("strong",{className:"product-name",children:s.name})]}),t.jsxs("small",{className:"product-count",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 20",className:"icon-heart","aria-hidden":"true",children:t.jsx("path",{d:`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 
                         2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09
                         C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5
                         c0 3.78-3.4 6.86-8.55 11.54L12 21.35z`})})," ",t.jsx("span",{children:s.net_likes})]})]},h))})]})}function ae(){return t.jsxs("div",{className:"tab-content-container",children:[t.jsx(Ge,{}),t.jsx(Ze,{})]})}function Xe(){return t.jsx("svg",{style:{overflow:"visible"},xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 22",fill:"#fff",children:t.jsx("path",{d:`M21.3036 2.70184C20.766 2.16231 20.1278 1.73431 19.4253 1.4423C18.7228
        1.1503 17.9699 1 17.2095 1C16.4491 1 15.6961 1.1503 14.9936 1.4423C14.2912
        1.73431 13.6529 2.16231 13.1153 2.70184L11.9997 3.82104L10.8841
        2.70184C9.79827 1.61253 8.32556 1.00056 6.78997 1.00056C5.25437
        1.00056 3.78167 1.61253 2.69584 2.70184C1.61001 3.79115 1 5.26857
        1 6.80908C1 8.34959 1.61001 9.82701 2.69584 10.9163L11.9997 20.25L21.3036
        10.9163C21.8414 10.377 22.268 9.73674 22.5591 9.03201C22.8502 8.32728
        23 7.57192 23 6.80908C23 6.04624 22.8502 5.29088 22.5591 4.58615C22.268
        3.88142 21.8414 3.24112 21.3036 2.70184Z`})})}function Ye({itemId:e,itemTypeName:n,onSuccess:o}){const{user:r}=M(),{openSidebar:i}=de(),{favorites:l,fetchFavorites:s}=G(),[h,u]=m.useState(!1),c=m.useRef(null);m.useEffect(()=>{var a;let f=e;if(!f){const C=(a=c.current)==null?void 0:a.closest(".item-container");f=C==null?void 0:C.getAttribute("data-product-id")}if(!f)return u(!1);u(l.some(C=>String(C.item_id)===String(f)))},[l,e]);function p(f){var C,y;const a=((y=(C=f==null?void 0:f.querySelector("[data-role='product-link']"))==null?void 0:C.href)==null?void 0:y.toLowerCase())||"";return f!=null&&f.classList.contains("ticket-style")?a.includes("viator")?"Viator Ticket":"DB Ticket":f!=null&&f.classList.contains("coupon-style")?"Deal":"DB Product"}const x=async f=>{if(f.stopPropagation(),!r)return i();let a=e,C=n;if(!a){const y=f.currentTarget.closest(".item-container");a=y==null?void 0:y.getAttribute("data-product-id"),C=p(y)}a&&(await Ce(a,C),u(!0),s(),o==null||o())};return t.jsx("button",{ref:c,className:`product-cta like-button${h?" clicked":""}`,"data-role":"like","data-product-id":e,onClick:x,children:t.jsx(Xe,{})})}function Qe(){return t.jsxs("svg",{style:{overflow:"visible"},xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 23",fill:"#fff",children:[t.jsx("path",{d:`M21.3841 3.86417C20.8722 3.31265 20.2643 2.87514 19.5953 2.57664C18.9262
        2.27815 18.2091 2.12451 17.485 2.12451C16.7608 2.12451 16.0437 2.27815 15.3746 2.57664C14.7056
        2.87514 14.0977 3.31265 13.5858 3.86417L12.5233 5.00823L11.4608 3.86417C10.4267
        2.75065 9.02409 2.12509 7.56162 2.12509C6.09915 2.12509 4.69658 2.75065 3.66245 3.86417C2.62833
        4.97768 2.04736 6.48793 2.04736 8.06267C2.04736 9.63741 2.62833 11.1477 3.66245 12.2612L12.5233
        21.8022L21.3841 12.2612C21.8963 11.7099 22.3026 11.0554 22.5798 10.335C22.8571 9.6146 22.9997
        8.84246 22.9997 8.06267C22.9997 7.28288 22.8571 6.51074 22.5798 5.79035C22.3026 5.06995
        21.8963 4.41543 21.3841 3.86417Z`}),t.jsx("path",{style:{stroke:"var(--color-purple-text)"},d:"M21.9526 20.1155L1.00025 1",strokeWidth:"2",strokeLinecap:"round"})]})}function Ke({itemId:e,itemTypeName:n,onSuccess:o}){const{user:r}=M(),{openSidebar:i}=de(),{votes:l,fetchFavorites:s}=G(),[h,u]=m.useState(!1),c=m.useRef(null);m.useEffect(()=>{const f=c.current;let a=e;if(!a){const y=f==null?void 0:f.closest(".item-container");a=y==null?void 0:y.getAttribute("data-product-id")}if(!a)return u(!1);const C=l.find(y=>String(y.item_id)===String(a));u(C?C.vote_type===-1:!1)},[l,e]);function p(f){var C,y;const a=((y=(C=f==null?void 0:f.querySelector("[data-role='product-link']"))==null?void 0:C.href)==null?void 0:y.toLowerCase())||"";return f!=null&&f.classList.contains("ticket-style")?a.includes("viator")?"Viator Ticket":"DB Ticket":f!=null&&f.classList.contains("coupon-style")?"Deal":"DB Product"}const x=async f=>{if(f.stopPropagation(),!r)return i();let a=e,C=n;if(!a){const y=f.currentTarget.closest(".item-container");a=y==null?void 0:y.getAttribute("data-product-id"),C=p(y)}a&&(await be(a,C),u(!0),s(),o==null||o())};return t.jsx("button",{ref:c,className:`product-cta dislike-button${h?" clicked":""}`,"data-role":"dislike","data-product-id":e,onClick:x,children:t.jsx(Qe,{})})}function Je(){return t.jsx("svg",{style:{overflow:"visible"},xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 22 25",fill:"#fff",children:t.jsx("path",{fill:"none",d:`M7.21111 13.7889L14.8 18.2111M14.7889 6.01111L7.21111 10.4333
           M21 4.33333C21 6.17428 19.5076 7.66667 17.6667 7.66667C15.8257
           7.66667 14.3333 6.17428 14.3333 4.33333C14.3333 2.49238 15.8257
           1 17.6667 1C19.5076 1 21 2.49238 21 4.33333ZM7.66667 12.1111C7.66667
           13.9521 6.17428 15.4444 4.33333 15.4444C2.49238 15.4444 1 13.9521
           1 12.1111C1 10.2702 2.49238 8.77778 4.33333 8.77778C6.17428 8.77778
           7.66667 10.2702 7.66667 12.1111ZM21 19.8889C21 21.7298 19.5076
           23.2222 17.6667 23.2222C15.8257 23.2222 14.3333 21.7298 14.3333
           19.8889C14.3333 18.0479 15.8257 16.5556 17.6667 16.5556C19.5076
           16.5556 21 18.0479 21 19.8889Z`,stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function et({title:e,url:n}){const o=r=>{var s,h;r.stopPropagation();let i=e,l=n;if(!l){const u=r.currentTarget.closest(".item-container");i=i||((s=u==null?void 0:u.querySelector("[data-role='product-name']"))==null?void 0:s.innerText)||"",l=((h=u==null?void 0:u.querySelector("[data-role='product-link']"))==null?void 0:h.href)||""}navigator.share?navigator.share({title:i,text:i,url:l}):navigator.clipboard.writeText(l).then(()=>alert("Link copied!"))};return t.jsx("button",{className:"product-cta share-button","data-role":"share-link",onClick:o,children:t.jsx(Je,{})})}function tt({product:e,showDetails:n=!1,focused:o=!1,extraClass:r="",onMouseEnter:i}){var c;if(!e)return null;const l=n?{}:{display:"none"},s=e.type==="ticket"?(c=e.link)!=null&&c.toLowerCase().includes("viator")?"Viator Ticket":"DB Ticket":e.type==="deal"?"Deal":"DB Product",h=e.price?he(e.price,e.currency||"USD"):"",u=e.domain_url?`https://s2.googleusercontent.com/s2/favicons?domain=${e.domain_url}&sz=64`:e.logo_url||"";return t.jsxs("div",{className:`item-container ${n?"show-details":""} ${o?"focused":""} ${r}`,"data-product-id":e.id,onMouseEnter:i,children:[t.jsx("div",{className:"live-image-container",children:t.jsx("img",{"data-role":"product-image",src:e.image,alt:e.title,loading:"lazy"})}),t.jsxs("div",{className:"card-details live-details",style:n?{}:{display:"none"},children:[t.jsx("div",{"data-role":"product-name",style:l,children:e.title}),h&&t.jsxs("p",{"data-role":"product-price-container",style:{display:"flex",fontSize:"1rem",color:"#fff",justifyContent:"flex-start",alignItems:"center",lineHeight:"1.4rem",gap:".5rem"},children:[t.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#aaf"},children:"Price:"}),t.jsx("span",{"data-role":"product-price",style:{padding:"0",fontSize:"0.9rem",color:"#fff"},children:h})]}),t.jsxs("div",{className:"product-buttons-container",children:[e.link&&t.jsxs("a",{"data-role":"product-link",href:e.link,target:"_blank",rel:"noopener noreferrer",style:{...l,display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",background:"var(--color-primary)",color:"#fff",textAlign:"center",textDecoration:"none",padding:"6px 10px",borderRadius:"6px",fontSize:"0.95rem",fontWeight:"bold"},children:[t.jsx("p",{children:"Shop On"}),u&&t.jsx("img",{"data-role":"vendor-logo",src:u,alt:"Vendor Logo",style:{width:"auto",height:"24px",borderRadius:"6px",backgroundColor:"white"}})]}),t.jsxs("div",{style:{...l,display:"flex",gap:16,justifyContent:"space-around"},children:[t.jsx(Ye,{itemId:e.id,itemTypeName:s}),t.jsx(Ke,{itemId:e.id,itemTypeName:s}),t.jsx(et,{title:e.title,url:e.link})]})]})]})]})}const nt=m.forwardRef(function({selectedId:n,items:o},r){const{products:i}=ue(),l=o||i;return t.jsx("div",{className:"ai-frame-gallery",ref:r,children:l.map(s=>s.back_image?t.jsxs("div",{style:{position:"relative"},className:`frame-gallery-item${String(n)===String(s.id)?" focused":""}${s._status?` ${s._status}`:""}`,children:[t.jsx("img",{style:{width:"160px",minWidth:"160px",maxHeight:"90px",minHeight:"90px",maxWidth:"100%",height:"90px",objectFit:"contain"},src:s.back_image,alt:`Frame for ${s.title}`},s.id),t.jsxs("div",{style:{position:"absolute",bottom:0,padding:"4px",left:0,right:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",background:"rgba(0, 0, 0, 0.3)"},children:[s.matchType&&t.jsxs("p",{style:{fontSize:"0.8rem",color:"#fff",marginTop:"4px",maxWidth:"160px",whiteSpace:"normal"},children:["AI ",s.matchType]}),s.explanation&&t.jsx("p",{style:{fontSize:"0.7rem",color:"#fff",textAlign:"left",marginTop:"4px",maxWidth:"160px",whiteSpace:"normal"},children:s.explanation})]})]},s.id):null)})});function ot(e=768){const[n,o]=m.useState(typeof window<"u"?window.innerWidth<=e:!1);return m.useEffect(()=>{function r(){o(window.innerWidth<=e)}return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[e]),n}function le(){const{products:e,addProduct:n}=ue(),[o,r]=m.useState(null),[i,l]=m.useState(()=>e.map(g=>({...g,_status:""}))),s=ot(),h=m.useRef(null),u=m.useRef(null),c=m.useRef(null),p=m.useRef(null),x=m.useRef({}),f=m.useRef({}),a=m.useCallback(g=>{x.current[g]||(x.current[g]=!0,requestAnimationFrame(()=>{requestAnimationFrame(()=>{l(k=>k.map(d=>d.id===g?{...d,_status:""}:d)),delete x.current[g]})}))},[]),C=m.useCallback(g=>{f.current[g]||(f.current[g]=setTimeout(()=>{l(k=>k.filter(d=>d.id!==g)),delete f.current[g]},500))},[]);m.useEffect(()=>{function g(k){const d=k.detail;n(d),r(w=>w||String(d.id)),l(w=>w.some(v=>v.id===d.id)?w:[{...d,_status:"enter"},...w]),a(d.id)}return window.addEventListener("new-product",g),()=>window.removeEventListener("new-product",g)},[n,a]),m.useEffect(()=>{const g=f.current;return()=>{Object.values(g).forEach(clearTimeout)}},[]),m.useEffect(()=>{const g=i.map(v=>v.id),k=e.map(v=>v.id),d=e.filter(v=>!g.includes(v.id)),w=i.filter(v=>!k.includes(v.id));!d.length&&!w.length||(l(v=>{let E=[...v];return d.forEach(S=>{E.unshift({...S,_status:"enter"})}),w.forEach(S=>{E=E.map(L=>L.id===S.id?{...L,_status:"exit"}:L)}),E}),d.forEach(v=>a(v.id)),w.forEach(v=>C(v.id)))},[e,i,a,C]),m.useEffect(()=>{!o&&e.length&&r(String(e[0].id))},[e,o]);const y=m.useCallback(g=>{s||r(String(g.id))},[s]);return m.useEffect(()=>{const g=h.current,k=c.current;if(!g||!k||!s)return;function d(v){if(!v||v===p.current)return;const E=v.getAttribute("data-product-id");i.some(S=>String(S.id)===String(E))&&(p.current=v,r(E))}function w(){const v=g.getBoundingClientRect(),E=v.height,S=g.scrollTop,L=k.scrollHeight-E,P=120,O=E-120,j=L>0?S/L:0,ve=v.top+P+j*(O-P),J=Array.from(k.querySelectorAll(".item-container"));let q=null,ee=1/0;J.forEach(U=>{const te=U.getBoundingClientRect(),ye=te.top+te.height/2,ne=Math.abs(ye-ve);ne<ee&&(ee=ne,q=U)}),J.forEach(U=>U.classList.remove("focused")),q&&(q.classList.add("focused"),d(q))}return g.addEventListener("scroll",w,{passive:!0}),requestAnimationFrame(w),()=>{g.removeEventListener("scroll",w)}},[i,s]),m.useEffect(()=>{const g=u.current,k=h.current;if(!g||!k)return;let d=!1;function w(){if(d)return;d=!0;const v=k.scrollHeight-k.clientHeight,E=v>0?k.scrollTop/v:0;if(g.scrollWidth>g.clientWidth){const L=g.scrollWidth-g.clientWidth;g.scrollLeft=E*L}else{const L=g.scrollHeight-g.clientHeight;g.scrollTop=E*L}d=!1}return k.addEventListener("scroll",w,{passive:!0}),()=>{k.removeEventListener("scroll",w)}},[]),t.jsxs("div",{className:"liveshopping-container",style:{width:"100%"},children:[t.jsx(nt,{ref:u,selectedId:o,items:i}),t.jsx("div",{id:"absolute-container",ref:h,children:t.jsx("div",{id:"itemContent",ref:c,style:{display:"flex"},children:i.map(g=>t.jsx(tt,{product:g,showDetails:!0,focused:String(o)===String(g.id),extraClass:g._status,onMouseEnter:s?void 0:()=>y(g)},g.id))})})]})}function ce({refreshKey:e,onNavigateToLive:n,openProfileSidebar:o}){const{favorites:r,removeFavorite:i,fetchFavorites:l}=G(),{user:s}=M(),h=m.useRef(null),u=m.useRef(null);return m.useEffect(()=>{l()},[e,l]),m.useEffect(()=>{const c=h.current;if(!c)return;function p(f){c.scrollTop===0?u.current=f.touches[0].clientY:u.current=null}function x(f){if(u.current===null)return;f.touches[0].clientY-u.current>60&&(l(),u.current=null)}return c.addEventListener("touchstart",p,{passive:!0}),c.addEventListener("touchmove",x,{passive:!0}),()=>{c.removeEventListener("touchstart",p),c.removeEventListener("touchmove",x)}},[l]),r.length?t.jsx("div",{id:"favs",className:"favs",ref:h,style:{overflowY:"auto",WebkitOverflowScrolling:"touch"},children:r.map(c=>t.jsxs("div",{className:"fav-item","data-item-id":c.item_id,style:{display:"flex",alignItems:"center",marginBottom:8},children:[t.jsxs("a",{href:c.affiliate_link,target:"_blank",rel:"noopener noreferrer",className:"fav-item-link w-inline-block",style:{flex:1,display:"flex",textDecoration:"none",width:"100%"},children:[t.jsx("div",{className:"fav-img-container",style:{marginRight:8},children:t.jsx("img",{src:c.image_link,loading:"lazy",alt:c.name,className:"fav-img"})}),t.jsx("h6",{className:"fav-h",children:c.name})]}),t.jsx("button",{className:"fav-remove","aria-label":"Remove favorite",onClick:()=>i(c.item_id,c.itemTypeName),children:"Remove From Favorites"})]},c.item_id))}):s?t.jsxs("div",{style:{padding:"1rem",textAlign:"center"},children:[t.jsx("p",{style:{marginBottom:"1rem",color:"#fff",lineHeight:"1.5"},children:"You haven’t liked any products yet. Discover something you love in Live Shopping!"}),t.jsx("button",{onClick:n,className:"favorites-cta",children:"Go to Live"})]}):t.jsxs("div",{style:{padding:"1rem",textAlign:"center"},children:[t.jsx("p",{style:{marginBottom:"1rem",color:"#fff",lineHeight:"1.5"},children:"Sign in to see your Favorite Products"}),t.jsx("button",{onClick:o,className:"favorites-cta",children:"Sign In"})]})}function rt({openProfileSidebar:e}){const n=m.useMemo(()=>[{key:"live",label:"Live Now",Component:le},{key:"home",label:"Top Picks",Component:ae},{key:"favorites",label:"Favorites",Component:ce}],[]),[o,r]=m.useState(0),[i,l]=m.useState(n[0].key),s=m.useRef(0),h=m.useRef([]);return h.current.length!==n.length&&(h.current=n.map((u,c)=>h.current[c]||fe.createRef())),m.useEffect(()=>{h.current.forEach((u,c)=>{const p=u.current;p&&Object.assign(p.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"transform 0.25s ease",transform:c===0?"translateX(0)":"translateX(100%)"})})},[n]),m.useEffect(()=>{const u=n.findIndex(f=>f.key===i),c=s.current;if(u===c)return;const p=h.current[u].current,x=h.current[c].current;!p||!x||(p.style.transition="none",p.style.transform=u>c?"translateX(100%)":"translateX(-100%)",p.offsetWidth,x.style.transition="transform 0.25s ease",x.style.transform=u>c?"translateX(-100%)":"translateX(100%)",p.style.transition="transform 0.25s ease",p.style.transform="translateX(0)",s.current=u)},[i,n]),t.jsxs(t.Fragment,{children:[t.jsx("nav",{className:"nested-tabs",children:n.map(({key:u,label:c})=>t.jsx("button",{className:`nested-tab${i===u?" active":""}`,onClick:()=>l(u),children:c},u))}),t.jsx("section",{className:"subtab-section",style:{position:"relative",width:"100%",height:"100%"},children:n.map(({key:u},c)=>u==="favorites"?t.jsx("div",{ref:h.current[c],className:"nested-content",children:t.jsx(ce,{refreshKey:o,onNavigateToLive:()=>l("live"),openProfileSidebar:e})},u):t.jsx("div",{ref:h.current[c],className:"nested-content",children:u==="live"?t.jsx(le,{onLike:()=>r(p=>p+1)}):t.jsx(ae,{})},u))})]})}function it(){return t.jsx("div",{className:"tab-content-container",children:t.jsx("p",{style:{padding:"1rem",textAlign:"center",color:"var(--color-gray)"},children:"🎮 Games section coming soon!"})})}const st=()=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"18",viewBox:"0 0 36 24",fill:"none",children:[t.jsx("path",{d:"M22.3506 1.80762C23.8133 1.08504 24.9835 0.528217 26.4883 0.835938L26.7939 0.90918C26.9463 0.951072 27.203 1.0735 27.5518 1.31641C27.8908 1.5526 28.2814 1.87784 28.6973 2.28613C29.4251 3.00075 30.2095 3.94707 30.915 5.06152L31.2119 5.5498C33.0239 8.64262 34.0753 10.9626 34.7725 14.3145L34.9072 14.999C35.4413 17.8652 35.2463 19.6327 35.0234 20.5596L34.9287 20.9062C34.8474 21.1658 34.6908 21.4099 34.4697 21.6299L34.3711 21.7227C34.069 21.9911 33.6291 22.3342 33.0859 22.627C31.8667 23.284 30.2955 22.8563 28.9121 21.8379C28.6436 21.6402 28.3812 21.4419 28.1221 21.2441L27.3525 20.6523C24.7007 18.6036 22.2039 16.6549 18.1797 16.6035L17.7861 16.6045C14.3929 16.6644 12.1796 18.0986 10.0605 19.7344L9.15527 20.4443C8.4892 20.9701 7.81894 21.4993 7.09668 22.0137C5.80079 22.9365 4.33827 23.3474 3.19922 22.7881C2.8564 22.6197 2.58114 22.4234 2.36426 22.2334L2.16602 22.0469C1.83674 21.7113 1.56991 21.2941 1.36523 20.832L1.28125 20.6309C0.947859 19.7858 0.532238 18.1264 0.882812 15.5195L0.963867 14.9854C1.55266 11.4593 2.35959 9.12759 4.03809 6.15332L4.38574 5.5498C5.16321 4.22278 6.06864 3.10285 6.90039 2.28613C7.31619 1.87785 7.70685 1.5526 8.0459 1.31641C8.30786 1.13393 8.51796 1.01931 8.6709 0.956055L8.80469 0.90918C10.2533 0.5119 11.3741 0.907762 12.6768 1.5293L13.2471 1.80762C14.4916 2.42241 15.944 3.15135 17.7988 3.15137C19.4217 3.15137 20.7361 2.59327 21.873 2.04199L22.3506 1.80762Z",stroke:"currentColor",strokeWidth:"1.5"}),t.jsx("circle",{cx:"25.5",cy:"7.5",r:"1.5",fill:"currentColor"}),t.jsx("circle",{cx:"22.5",cy:"10.5",r:"1.5",fill:"currentColor"}),t.jsx("circle",{cx:"28.5",cy:"10.5",r:"1.5",fill:"currentColor"}),t.jsx("circle",{cx:"25.5",cy:"13.5",r:"1.5",fill:"currentColor"}),t.jsx("path",{d:"M9.63024 6.3091C9.97975 5.9516 10.4633 5.81408 10.9996 5.81398C11.5393 5.81394 12.0233 5.95418 12.373 6.31186C12.7068 6.65322 12.803 7.07845 12.8398 7.3808C12.8589 7.53748 12.8651 7.69062 12.8688 7.81722C12.873 7.95558 12.8743 8.05148 12.8806 8.14661C12.8811 8.15457 12.8821 8.16214 12.8827 8.16939C12.8937 8.17073 12.9058 8.17363 12.9186 8.17492C13.0132 8.18448 13.1107 8.18898 13.2466 8.19771C13.3722 8.20577 13.5232 8.21704 13.6768 8.23983C13.9717 8.28363 14.3843 8.38437 14.7181 8.70111C15.0755 9.04026 15.2243 9.50956 15.2243 10.0387C15.2242 10.5539 15.0891 11.0242 14.7312 11.3631C14.3955 11.6809 13.9792 11.7678 13.6968 11.8037C13.5492 11.8224 13.4017 11.8307 13.2832 11.8375C13.1551 11.8448 13.0588 11.8506 12.971 11.861C12.9043 11.8689 12.8623 11.8806 12.8371 11.8872C12.8288 11.9143 12.817 11.9601 12.806 12.0329C12.7927 12.1214 12.7835 12.219 12.7722 12.3457C12.7617 12.4635 12.7493 12.6091 12.7273 12.7538C12.6853 13.0297 12.5934 13.4327 12.2923 13.7606C12.0047 14.0736 11.619 14.224 11.1874 14.2565L11.0003 14.2627C10.4964 14.2626 10.0389 14.1219 9.71035 13.7641C9.40897 13.4357 9.32058 13.0312 9.28014 12.758C9.25894 12.6147 9.24615 12.4696 9.23595 12.3533C9.22497 12.2282 9.21624 12.1313 9.2028 12.044C9.18797 11.9477 9.17138 11.8977 9.16275 11.8755C9.14005 11.867 9.09093 11.8521 8.99841 11.8382C8.91119 11.8252 8.81442 11.8169 8.68905 11.8064C8.57263 11.7968 8.42686 11.7844 8.28301 11.7636C8.0089 11.724 7.60293 11.6365 7.27345 11.3327C6.91542 11.0026 6.7756 10.543 6.77558 10.038C6.77566 9.51989 6.92878 9.06272 7.28519 8.73287C7.61308 8.4295 8.01611 8.32899 8.30235 8.28195C8.45192 8.25737 8.5998 8.24259 8.72288 8.23154C8.85525 8.21966 8.95462 8.21219 9.04743 8.19978C9.07678 8.19585 9.10114 8.18837 9.12201 8.18459C9.1236 8.16928 9.12824 8.15228 9.12961 8.1328C9.13613 8.04008 9.13824 7.94397 9.14204 7.80825C9.14553 7.68344 9.1509 7.53048 9.16897 7.37528C9.20384 7.07614 9.29642 6.65072 9.63024 6.3091Z",stroke:"currentColor",strokeWidth:"1.5"})]}),at=[{name:"ATP Media",id:"2d192295-4e70-4187-a06d-55ecac2f9bf6"},{name:"CW Networks",id:"946027d4-367c-4f7d-90e4-4929638d60bc"},{name:"Danger TV",id:"a1ba66f8-4540-444d-be98-bc5f761169c0"},{name:"EuroNews",id:"4deb3daf-a58c-4da5-aabc-e84f00eb50da"},{name:"EuroNews Travel",id:"bf08f473-7888-4fbb-a97e-d862f484a1c8"},{name:"Insight TV (EU)",id:"3af7a440-2c68-45bc-ab31-9384fc4c4bcb"},{name:"Insight TV (UK)",id:"ada3896d-0456-4589-95fa-cf71718b79c8"},{name:"Insight TV (US)",id:"3d8c4c38-2d6e-483c-bdc5-e1eeeadd155e"},{name:"MVMNT Culture",id:"ba08370c-0362-462d-b299-97cc36973340"},{name:"Narative Entertainment",id:"ba398d25-ef88-4762-bcd6-d75a2930fbeb"},{name:"Wedosport",id:"2de0e45d-1eda-4f15-a4d8-0076485b9545"},{name:"WILD TV",id:"43b08654-edb3-4757-9a53-4249b3f6ddfd"}];function lt(){const e=window.location.origin;return t.jsx("div",{className:"tab-content-container",children:t.jsx("ul",{className:"quick-access-list",children:at.map(n=>t.jsx("li",{children:t.jsx("button",{className:"btn btn--primary quick-access-btn",onClick:()=>{window.location.href=`${e}/app?channelId=${n.id}`},children:n.name})},n.id))})})}const ct=()=>t.jsxs("div",{className:"app-bg",children:[t.jsx("div",{className:"circle circle-1"}),t.jsx("div",{className:"circle circle-2"}),t.jsx("div",{className:"circle circle-3"})]}),dt=window.DEFAULT_CHANNEL_ID||"3d8c4c38-2d6e-483c-bdc5-e1eeeadd155e";function ut(){return m.useMemo(()=>{let n=new URLSearchParams(window.location.search).get("channelId")||dt;try{localStorage.setItem("channelId",n)}catch{}return n},[])}function mt(){ut();const e=m.useMemo(()=>[{key:"shopping",label:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 256 256",children:t.jsx("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,160H40V56H216V200ZM176,88a48,48,0,0,1-96,0,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0Z"})}),Component:rt},{key:"games",label:t.jsx(st,{}),Component:it},{key:"quick",label:"Quick Access",Component:lt}],[]),[n,o]=m.useState(e[0].key),[r,i]=m.useState(!1),l=()=>i(c=>!c),s=()=>i(!1),h=m.useRef(0),u=m.useRef([]);return u.current.length!==e.length&&(u.current=e.map((c,p)=>u.current[p]||fe.createRef())),m.useEffect(()=>{e.forEach((c,p)=>{const x=u.current[p].current;x&&Object.assign(x.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"transform 0.3s ease",transform:p===0?"translateX(0)":"translateX(100%)"})})},[e]),m.useEffect(()=>{const c=e.findIndex(a=>a.key===n),p=h.current;if(c===p||c<0){h.current=c;return}const x=u.current[c].current,f=u.current[p].current;if(!x||!f){h.current=c;return}x.style.transition="none",x.style.transform=c>p?"translateX(100%)":"translateX(-100%)",x.offsetWidth,f.style.transition="transform 0.3s ease",f.style.transform=c>p?"translateX(-100%)":"translateX(100%)",x.style.transition="transform 0.3s ease",x.style.transform="translateX(0)",h.current=c},[n,e]),t.jsxs(t.Fragment,{children:[t.jsx(ze,{features:["products","faces","auth"]}),t.jsx(Ee,{onToggleSidebar:l}),t.jsx("section",{style:{position:"relative",flex:"1",overflow:"hidden"},children:e.map(({key:c,Component:p},x)=>t.jsx("div",{className:"tab-content",ref:u.current[x],children:c==="shopping"?t.jsx(p,{openProfileSidebar:l}):t.jsx(p,{})},c))}),t.jsx(Le,{tabs:e,activeTab:n,onChangeTab:o,onToggleSidebar:l}),t.jsx(ke,{isOpen:r,onClose:s}),t.jsx(ct,{})]})}export{mt as default};
